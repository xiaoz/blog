
<form class="form-horizontal">


  <div class="control-group">
    <label class="control-label" >所属分类 :</label>
    <div class="controls">
     	<select>
		  <option value="1">首页焦点图</option>
		</select>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="inputTitle">焦点标题 ：</label>
    <div class="controls">
      <input class="span8" type="text" id="inputTitle" placeholder="">
    </div>
  </div>
  
   <div class="control-group">
    <label class="control-label" for="inputUrl">链接地址 :	</label>
    <div class="controls">
      <input class="span8" type="text" id="inputUrl"  placeholder="">
    </div>
  </div>
   <div class="control-group">
		<label class="control-label"></label>
		<div class="controls">
			<img id='current_avatar' style='padding:4px;width:70px;border:1px solid #eee' src='#'/>
			</div>
  </div>
   <div class="control-group">
		<label class="control-label">选择文件</label>
							<div class="controls">
								<a onclick="chooseAvatar()" href='javascript:void(0)' class="btn btn-info">选择文件</a>
								<a id="link_upload_file" onclick="uploadAvatar()" href='javascript:void(0)' class="btn btn-info" style="display:none;"'>上传</a>
								<div style="height:15px;width:100px;"></div>
								<span  class="label label-info" id="file_name_span">提示信息</span>
							</div>
  </div>
  
   <div class="control-group">
    <label class="control-label" for="inputNum">焦点排序</label>
    <div class="controls">
      <input class="span3" type="text" id="inputNum" value="0" placeholder="">
    </div>
  </div>
  
   <div class="control-group">
    <label class="control-label" for="inputDetail">焦点描述</label>
    <div class="controls">
      <textarea rows="5" id="inputDetail"></textarea>
    </div>
  </div>
  
  
  <div class="control-group">
    <div class="controls">
      <button type="submit" class="btn">保存</button>
    </div>
  </div>
</form>

<form id="avatarForm" action="/focus/upload" method="post" target="hidden_frame" enctype="multipart/form-data" style="visibility:hidden;">
					<input type="file" name="avatar" onchange="changeFileChoose(this);" />
					<input type="submit" id="upload_submit_button"/>
				</form>
				<!-- 隐藏提交iframe -->
				<iframe name="hidden_frame" id="hidden_frame" style="display:none"></iframe>

				<script type="text/javascript" src="/libs/jquery/jquery.form.js"></script>
      <script>
					$('#avatarForm').ajaxForm({
					    complete : function(xhr) {
					        var data = xhr.responseText;
					        data = eval("(" + data + ")");
					        if (data.state=='success') {
					            $('#file_name_span').html($('#file_name_span').text()+":上传成功");
					            $('#current_avatar').attr('src', data.url);
					        }
					        else {
					            alert('上传图片失败');
					        }
					    }
					});
				    function chooseAvatar() {
				        $("input[name='avatar']").click();
				        $('#link_upload_file').show();
				    }
				    function changeFileChoose(obj){		
				        $('#link_upload_file').show();
						$('#file_name_span').html(obj.value);
					}
				    function uploadAvatar(obj){
				        $('#link_upload_file').hide();
				        $('#upload_submit_button').click();
				    }
				</script> 

